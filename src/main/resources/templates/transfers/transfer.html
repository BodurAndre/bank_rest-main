<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–µ—Ä–µ–≤–æ–¥—ã - Bank Cards</title>
    <link rel="stylesheet" th:href="@{/css/transfers.css}">
</head>
<body>
    <div class="header">
        <h1>üí∞ –ü–µ—Ä–µ–≤–æ–¥—ã</h1>
        <div class="header-actions">
            <a href="/" class="btn btn-primary">üè† –î–æ–º–æ–π</a>
            <a href="/transfers/history" class="btn btn-secondary">–ò—Å—Ç–æ—Ä–∏—è</a>
            <a href="/logout" class="btn btn-secondary">–í—ã–π—Ç–∏</a>
        </div>
    </div>
    
    <div class="container">
        <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
        <div th:if="${successMessage}" class="alert alert-success" th:text="${successMessage}"></div>
        <div th:if="${errorMessage}" class="alert alert-error" th:text="${errorMessage}"></div>
        
        <!-- –§–æ—Ä–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞ -->
        <div class="transfer-form-container">
            <h2>–ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É –∫–∞—Ä—Ç–∞–º–∏</h2>
            
            <form th:action="@{/transfers/execute}" method="post" th:object="${transferRequest}" class="transfer-form">
                <div class="form-group">
                    <label for="fromCardId">–° –∫–∞—Ä—Ç—ã:</label>
                    <select id="fromCardId" th:field="*{fromCardId}" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è</option>
                        <option th:each="card : ${activeCards}" 
                                th:value="${card.id}" 
                                th:text="${card.maskedNumber + ' (–ë–∞–ª–∞–Ω—Å: ' + card.balance + ' ‚ÇΩ)'}"></option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="toCardId">–ù–∞ –∫–∞—Ä—Ç—É:</label>
                    <select id="toCardId" th:field="*{toCardId}" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É –ø–æ–ª—É—á–∞—Ç–µ–ª—è</option>
                        <option th:each="card : ${activeCards}" 
                                th:value="${card.id}" 
                                th:text="${card.maskedNumber + ' (–ë–∞–ª–∞–Ω—Å: ' + card.balance + ' ‚ÇΩ)'}"></option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="amount">–°—É–º–º–∞ (‚ÇΩ):</label>
                    <input type="number" id="amount" th:field="*{amount}" 
                           step="0.01" min="0.01" required 
                           placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –ø–µ—Ä–µ–≤–æ–¥–∞">
                </div>
                
                <div class="form-group">
                    <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
                    <textarea id="description" th:field="*{description}" 
                              placeholder="–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞"></textarea>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary btn-large">–í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥</button>
                    <button type="button" class="btn btn-secondary" onclick="clearForm()">–û—á–∏—Å—Ç–∏—Ç—å</button>
                </div>
            </form>
        </div>
        
        <!-- –ê–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç—ã -->
        <div class="active-cards">
            <h3>–í–∞—à–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç—ã</h3>
            <div th:if="${activeCards.isEmpty()}" class="empty-state">
                <p>–£ –≤–∞—Å –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞—Ä—Ç –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤</p>
            </div>
            <div th:else class="cards-grid">
                <div th:each="card : ${activeCards}" class="card-preview">
                    <div class="card-number" th:text="${card.maskedNumber}"></div>
                    <div class="card-balance" th:text="${card.balance} + ' ‚ÇΩ'"></div>
                    <div class="card-status active">–ê–∫—Ç–∏–≤–Ω–∞</div>
                </div>
            </div>
        </div>
        
        <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
        <div class="quick-actions">
            <h3>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
            <div class="actions-grid">
                <a href="/transfers/history" class="action-card">
                    <div class="action-icon">üìä</div>
                    <div class="action-title">–ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤</div>
                    <div class="action-description">–ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π</div>
                </a>
                
                <a href="/transfers/stats" class="action-card">
                    <div class="action-icon">üìà</div>
                    <div class="action-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
                    <div class="action-description">–ê–Ω–∞–ª–∏–∑ –≤–∞—à–∏—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤</div>
                </a>
                
                <a href="/cards" class="action-card">
                    <div class="action-icon">üí≥</div>
                    <div class="action-title">–ú–æ–∏ –∫–∞—Ä—Ç—ã</div>
                    <div class="action-description">–ü—Ä–æ—Å–º–æ—Ç—Ä –º–æ–∏—Ö –∫–∞—Ä—Ç</div>
                </a>
            </div>
        </div>
    </div>
    
    <script th:src="@{/js/transfers.js}"></script>
</body>
</html>
