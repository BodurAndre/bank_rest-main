# üîê –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–æ–≤ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∫–∞—Ä—Ç

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. **CardEncryptionUtil - –£—Ç–∏–ª–∏—Ç–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è**
- ‚úÖ **AES-128 —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** –Ω–æ–º–µ—Ä–æ–≤ –∫–∞—Ä—Ç
- ‚úÖ **–ê–ª–≥–æ—Ä–∏—Ç–º –õ—É–Ω–∞** –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–æ–º–µ—Ä–æ–≤
- ‚úÖ **Base64 –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î
- ‚úÖ **–ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (**** **** **** 1234)

### 2. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π BankCardService**
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–∞—Ä—Ç
- ‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤** –ø–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É –õ—É–Ω–∞
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏** –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤
- ‚úÖ **–ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è DTO

### 3. **–ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
- ‚úÖ **V11__Encrypt_existing_card_numbers.sql** - –º–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ changelog.xml** —Å –Ω–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–µ–π
- ‚úÖ **–í–∫–ª—é—á–µ–Ω–∏–µ Liquibase** –≤ application.yml

### 4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
- ‚úÖ **CardEncryptionUtilTest** - unit —Ç–µ—Å—Ç—ã –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ **BankCardServiceEncryptionTest** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏** –Ω–æ–º–µ—Ä–æ–≤ –∫–∞—Ä—Ç
- ‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏—è**

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### **–ê–ª–≥–æ—Ä–∏—Ç–º —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è:**
```java
// AES-128 —Å ECB —Ä–µ–∂–∏–º–æ–º
private static final String ALGORITHM = "AES";
private static final String TRANSFORMATION = "AES/ECB/PKCS5Padding";
```

### **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É –õ—É–Ω–∞:**
```java
public boolean isValidCardNumber(String cardNumber) {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Å—É–º–º—ã
    // –£–¥–≤–æ–µ–Ω–∏–µ –∫–∞–∂–¥–æ–π –≤—Ç–æ—Ä–æ–π —Ü–∏—Ñ—Ä—ã —Å–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ
    // –°–ª–æ–∂–µ–Ω–∏–µ –≤—Å–µ—Ö —Ü–∏—Ñ—Ä
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∞—Ç–Ω–æ—Å—Ç–∏ 10
}
```

### **–ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```java
// –ò—Å—Ö–æ–¥–Ω—ã–π: 4532015112830366
// –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π: **** **** **** 0366
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### **–°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã:**
```java
CreateBankCardRequest request = new CreateBankCardRequest();
request.setOwnerEmail("user@example.com");
request.setExpiryDate("12/25");

BankCardDto card = bankCardService.createCard(request);
// –ù–æ–º–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —à–∏—Ñ—Ä—É–µ—Ç—Å—è –∏ –º–∞—Å–∫–∏—Ä—É–µ—Ç—Å—è
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏:**
```java
boolean isValid = cardEncryptionUtil.isValidCardNumber("4532015112830366");
// true –¥–ª—è –≤–∞–ª–∏–¥–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞
```

### **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ/—Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞:**
```java
String encrypted = cardEncryptionUtil.encryptCardNumber("4532015112830366");
String decrypted = cardEncryptionUtil.decryptCardNumber(encrypted);
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### **–ß—Ç–æ –∑–∞—â–∏—â–µ–Ω–æ:**
- ‚úÖ **–ù–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç** —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ
- ‚úÖ **–ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ (–ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 —Ü–∏—Ñ—Ä—ã)
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è** –ø–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É –õ—É–Ω–∞
- ‚úÖ **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å** –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤

### **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**
1. **–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á** –¥–æ–ª–∂–µ–Ω —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. **–†–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π** –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
3. **–ê—É–¥–∏—Ç** –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∫–∞—Ä—Ç–∞–º–∏
4. **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:**
```bash
# Unit —Ç–µ—Å—Ç—ã —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
mvn test -Dtest=CardEncryptionUtilTest

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
mvn test -Dtest=BankCardServiceEncryptionTest

# –í—Å–µ —Ç–µ—Å—Ç—ã
mvn test
```

### **–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏:**
- ‚úÖ **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ/—Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞**
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–æ–º–µ—Ä–æ–≤**
- ‚úÖ **–ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ**
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ—Ä–≤–∏—Å–æ–º**

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### **–î–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:**
- ‚ùå –ù–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç —Ö—Ä–∞–Ω–∏–ª–∏—Å—å –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ
- ‚ùå –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —É—Ç–µ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### **–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:**
- ‚úÖ **–ü–æ–ª–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** –Ω–æ–º–µ—Ä–æ–≤ –∫–∞—Ä—Ç
- ‚úÖ **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º** PCI DSS
- ‚úÖ **–ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è** –ø–æ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è** –¥–ª—è —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞
2. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞—É–¥–∏—Ç–∞** –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∫–∞—Ä—Ç–∞–º–∏
3. **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–æ—Ç–∞—Ü–∏–∏ –∫–ª—é—á–µ–π**
4. **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π** (–µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—ã—Å–æ–∫–∏–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏! üîê
