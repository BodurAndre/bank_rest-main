# üöÄ JWT Authentication Setup - Bank Cards Management System

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. **JWT –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**
- ‚úÖ JwtUtils - —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JWT —Ç–æ–∫–µ–Ω–∞–º–∏
- ‚úÖ JwtAuthenticationFilter - —Ñ–∏–ª—å—Ç—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ JWT –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö
- ‚úÖ AuthController - API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ SecurityConfig - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Spring Security

### 2. **–ú–æ–¥–µ–ª–∏ –∏ —Å–µ—Ä–≤–∏—Å—ã**
- ‚úÖ User entity —Å —Ä–æ–ª—è–º–∏ (USER, ADMIN)
- ‚úÖ UserRepository –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ UserService –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- ‚úÖ CustomUserDetailsService –¥–ª—è Spring Security

### 3. **DTO –∫–ª–∞—Å—Å—ã**
- ‚úÖ AuthResponse - –æ—Ç–≤–µ—Ç —Å JWT —Ç–æ–∫–µ–Ω–æ–º
- ‚úÖ LoginRequest - –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤—Ö–æ–¥
- ‚úÖ RegisterRequest - –∑–∞–ø—Ä–æ—Å –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é

### 4. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
- ‚úÖ Swagger/OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (PostgreSQL/MySQL)
- ‚úÖ JWT –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ –¢–µ—Å—Ç–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å H2

### 5. **–¢–µ—Å—Ç—ã**
- ‚úÖ –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –¥–ª—è JwtUtils
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è AuthController
- ‚úÖ –¢–µ—Å—Ç–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### 1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**

#### MySQL (–∫–∞–∫ –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ):
```sql
CREATE DATABASE bankcards;
-- –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è root —Å –ø–∞—Ä–æ–ª–µ–º 12345678
-- –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
-- CREATE USER 'bankcards'@'localhost' IDENTIFIED BY '12345678';
-- GRANT ALL PRIVILEGES ON bankcards.* TO 'bankcards'@'localhost';
```

### 2. **–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
```bash
cd C:\Users\–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä\IdeaProjects\bank_rest-main
mvn spring-boot:run
```

### 3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã**
- **Swagger UI**: http://localhost:8081/swagger-ui.html
- **API Docs**: http://localhost:8081/v3/api-docs

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ JWT API

### **1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
```bash
curl -X POST http://localhost:8081/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "password123",
    "firstName": "Test",
    "lastName": "User",
    "dateOfBirth": "1990-01-01",
    "country": "Russia",
    "gender": "Male"
  }'
```

### **2. –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É**
```bash
curl -X POST http://localhost:8081/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "password123"
  }'
```

### **3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞**
```bash
curl -X POST http://localhost:8081/api/auth/validate \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

## üìä API Endpoints

| Method | Endpoint | Description | Auth Required |
|--------|----------|-------------|---------------|
| POST | `/api/auth/register` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | ‚ùå |
| POST | `/api/auth/login` | –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É | ‚ùå |
| POST | `/api/auth/validate` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ | ‚ùå |
| GET | `/swagger-ui.html` | Swagger UI | ‚ùå |
| GET | `/v3/api-docs` | OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | ‚ùå |

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 8081** (–∫–∞–∫ –≤ –≤–∞—à–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ)

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### **JWT –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** (application.yml):
```yaml
jwt:
  secret: mySecretKey123456789012345678901234567890
  expiration: 86400000 # 24 hours
```

### **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** (application.yml):
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/bankcards
    username: root
    password: 12345678
```

## üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### **–í—Å–µ —Ç–µ—Å—Ç—ã:**
```bash
mvn test
```

### **–¢–æ–ª—å–∫–æ JWT —Ç–µ—Å—Ç—ã:**
```bash
mvn test -Dtest=*Jwt*Test
```

### **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:**
```bash
mvn test -Dtest=*ControllerTest
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/main/java/com/example/bankcards/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ SecurityConfig.java          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ SwaggerConfig.java           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Swagger
‚îú‚îÄ‚îÄ controller/
‚îÇ   ‚îî‚îÄ‚îÄ AuthController.java          # API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ dto/
‚îÇ   ‚îú‚îÄ‚îÄ AuthResponse.java            # –û—Ç–≤–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ LoginRequest.java            # –ó–∞–ø—Ä–æ—Å –≤—Ö–æ–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ RegisterRequest.java         # –ó–∞–ø—Ä–æ—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ entity/
‚îÇ   ‚îî‚îÄ‚îÄ User.java                    # –°—É—â–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îú‚îÄ‚îÄ repository/
‚îÇ   ‚îî‚îÄ‚îÄ UserRepository.java          # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ security/
‚îÇ   ‚îú‚îÄ‚îÄ CustomUserDetailsService.java # –°–µ—Ä–≤–∏—Å –¥–ª—è Spring Security
‚îÇ   ‚îî‚îÄ‚îÄ JwtAuthenticationFilter.java  # JWT —Ñ–∏–ª—å—Ç—Ä
‚îú‚îÄ‚îÄ service/
‚îÇ   ‚îî‚îÄ‚îÄ UserService.java             # –°–µ—Ä–≤–∏—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ util/
‚îÇ   ‚îî‚îÄ‚îÄ JwtUtils.java                # JWT —É—Ç–∏–ª–∏—Ç—ã
‚îî‚îÄ‚îÄ BankCardsApplication.java        # –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è! –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏:

1. **–°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å BankCard** - —Å—É—â–Ω–æ—Å—Ç—å –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç—ã
2. **–°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å Transaction** - —Å—É—â–Ω–æ—Å—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
3. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏** –¥–ª—è –∫–∞—Ä—Ç
4. **–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã –º–µ–∂–¥—É –∫–∞—Ä—Ç–∞–º–∏**
5. **–°–æ–∑–¥–∞—Ç—å Liquibase –º–∏–≥—Ä–∞—Ü–∏–∏**
6. **–î–æ–±–∞–≤–∏—Ç—å Docker Compose**
7. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–æ–≤ –∫–∞—Ä—Ç**
8. **–î–æ–±–∞–≤–∏—Ç—å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç**

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏
- ‚úÖ BCrypt —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- ‚úÖ –†–æ–ª–µ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (USER, ADMIN)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ Stateless –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

## üìù –õ–æ–≥–∏

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ª–æ–≥–∏—Ä—É–µ—Ç:
- JWT –æ–ø–µ—Ä–∞—Ü–∏–∏ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏—è)
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –û—à–∏–±–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- SQL –∑–∞–ø—Ä–æ—Å—ã (–≤ debug —Ä–µ–∂–∏–º–µ)

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ**
